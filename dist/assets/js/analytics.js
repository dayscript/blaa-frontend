/**
 * Angular Google Analytics - Easy tracking for your AngularJS application
 * @version v1.1.7 - 2016-03-25
 * @link http://github.com/revolunet/angular-google-analytics
 * @author Julien Bouquillon <julien@revolunet.com> (https://github.com/revolunet)
 * @contributors Julien Bouquillon (https://github.com/revolunet),Justin Saunders (https://github.com/justinsa),Chris Esplin (https://github.com/deltaepsilon),Adam Misiorny (https://github.com/adam187)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["angular"],b):"object"==typeof module&&module.exports?module.exports=b(require("angular")):b(a.angular)}(this,function(a,b){"use strict";return a.module("angular-google-analytics",[]).provider("Analytics",function(){var c,d,e,f,g,h=!0,i="auto",j=!1,k=!1,l="USD",m=!1,n=!1,o=!1,p=!1,q=!1,r=!1,s=!1,t=!1,u=!1,v=!1,w=!1,x="$routeChangeSuccess",y=!1,z=!1,A=!1,B="",C=!0,D=!1;this.log=[],this.offlineQueue=[],this.setAccount=function(d){return c=a.isUndefined(d)||d===!1?b:a.isArray(d)?d:a.isObject(d)?[d]:[{tracker:d,trackEvent:!0}],this},this.trackPages=function(a){return C=!!a,this},this.trackPrefix=function(a){return B=a,this},this.setDomainName=function(a){return e=a,this},this.useDisplayFeatures=function(a){return o=!!a,this},this.useAnalytics=function(a){return h=!!a,this},this.useEnhancedLinkAttribution=function(a){return s=!!a,this},this.useCrossDomainLinker=function(a){return k=!!a,this},this.setCrossLinkDomains=function(a){return d=a,this},this.setPageEvent=function(a){return x=a,this},this.setCookieConfig=function(a){return i=a,this},this.useECommerce=function(a,b){return q=!!a,r=!!b,this},this.setCurrency=function(a){return l=a,this},this.setRemoveRegExp=function(a){return a instanceof RegExp&&(g=a),this},this.setExperimentId=function(a){return f=a,this},this.ignoreFirstPageLoad=function(a){return t=!!a,this},this.trackUrlParams=function(a){return D=!!a,this},this.disableAnalytics=function(a){return p=!!a,this},this.setHybridMobileSupport=function(a){return v=!!a,this},this.startOffline=function(a){return w=!!a,w===!0&&this.delayScriptTag(!0),this},this.delayScriptTag=function(a){return n=!!a,this},this.logAllCalls=function(a){return u=!!a,this},this.enterTestMode=function(){return z=!0,this},this.enterDebugMode=function(a){return m=!0,A=!!a,this},this.readFromRoute=function(a){return y=!!a,this},this.$get=["$document","$location","$log","$rootScope","$window","$injector",function(E,F,G,H,I,J){var K=this,L=function(b,c){return a.isObject(c)&&a.isDefined(c[b])},M=function(a,b,c){return L(a,b)&&b[a]===c},N=function(b,c){return a.isString(c)?c+"."+b:L("name",c)?c.name+"."+b:b},O={};y&&(J.has("$route")?O=J.get("$route"):G.warn("$route service is not available. Make sure you have included ng-route in your application dependencies."));var P=function(){if(y&&O.current&&"pageTrack"in O.current)return O.current.pageTrack;var a=D?F.url():F.path();return g?a.replace(g,""):a},Q=function(){var b={utm_source:"campaignSource",utm_medium:"campaignMedium",utm_term:"campaignTerm",utm_content:"campaignContent",utm_campaign:"campaignName"},c={};return a.forEach(F.search(),function(d,e){var f=b[e];a.isDefined(f)&&(c[f]=d)}),c},R=function(a,b,c,d,e,f,g,h,i){var j={};return a&&(j.id=a),b&&(j.affiliation=b),c&&(j.revenue=c),d&&(j.tax=d),e&&(j.shipping=e),f&&(j.coupon=f),g&&(j.list=g),h&&(j.step=h),i&&(j.option=i),j},S=function(a){!h&&I._gaq&&"function"==typeof a&&a()},T=function(){var a=Array.prototype.slice.call(arguments);return w===!0?void K.offlineQueue.push([T,a]):(I._gaq||(I._gaq=[]),u===!0&&K._log.apply(K,a),void I._gaq.push(a))},U=function(a){h&&I.ga&&"function"==typeof a&&a()},V=function(){var a=Array.prototype.slice.call(arguments);return w===!0?void K.offlineQueue.push([V,a]):"function"!=typeof I.ga?void K._log("warn","ga function not set on window"):(u===!0&&K._log.apply(K,a),void I.ga.apply(null,a))},W=function(a){var b=Array.prototype.slice.call(arguments,1),d=b[0],e=[];return"function"==typeof a?c.forEach(function(b){a(b)&&e.push(b)}):e=c,0===e.length?void V.apply(K,b):void e.forEach(function(a){L("select",a)&&"function"==typeof a.select&&!a.select(b)||(b[0]=N(d,a),V.apply(K,b))})};return this._log=function(){var a=Array.prototype.slice.call(arguments);if(a.length>0){if(a.length>1)switch(a[0]){case"debug":case"error":case"info":case"log":case"warn":G[a[0]](a.slice(1))}K.log.push(a)}},this._createScriptTag=function(){if(!c||c.length<1)return void K._log("warn","No account id set to create script tag");if(c.length>1&&(K._log("warn","Multiple trackers are not supported with ga.js. Using first tracker only"),c=c.slice(0,1)),j===!0)return void K._log("warn","ga.js or analytics.js script tag already created");p===!0&&(K._log("info","Analytics disabled: "+c[0].tracker),I["ga-disable-"+c[0].tracker]=!0),T("_setAccount",c[0].tracker),e&&T("_setDomainName",e),s&&T("_require","inpage_linkid","//www.google-analytics.com/plugins/ga/inpage_linkid.js"),C&&!t&&(g?T("_trackPageview",P()):T("_trackPageview"));var a,b=E[0];return a=o===!0?("https:"===b.location.protocol?"https://":"http://")+"stats.g.doubleclick.net/dc.js":("https:"===b.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",z!==!0?!function(){var c=b.createElement("script");c.type="text/javascript",c.async=!0,c.src=a;var d=b.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}():K._log("inject",a),j=!0,!0},this._createAnalyticsScriptTag=function(){if(!c)return void K._log("warn","No account id set to create analytics script tag");if(j===!0)return void K._log("warn","ga.js or analytics.js script tag already created");p===!0&&c.forEach(function(a){K._log("info","Analytics disabled: "+a.tracker),I["ga-disable-"+a.tracker]=!0});var b=E[0],e=v===!0?"https:":"",g=e+"//www.google-analytics.com/"+(m?"analytics_debug.js":"analytics.js");if(z!==!0?!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,b,"script",g,"ga"):("function"!=typeof I.ga&&(I.ga=function(){}),K._log("inject",g)),A&&(I.ga_debug={trace:!0}),c.forEach(function(b){b.crossDomainLinker=L("crossDomainLinker",b)?b.crossDomainLinker:k,b.crossLinkDomains=L("crossLinkDomains",b)?b.crossLinkDomains:d,b.displayFeatures=L("displayFeatures",b)?b.displayFeatures:o,b.enhancedLinkAttribution=L("enhancedLinkAttribution",b)?b.enhancedLinkAttribution:s,b.set=L("set",b)?b.set:{},b.trackEcommerce=L("trackEcommerce",b)?b.trackEcommerce:q,b.trackEvent=L("trackEvent",b)?b.trackEvent:!1;var c={};L("fields",b)?c=b.fields:L("cookieConfig",b)?a.isString(b.cookieConfig)?c.cookieDomain=b.cookieConfig:c=b.cookieConfig:a.isString(i)?c.cookieDomain=i:i&&(c=i),b.crossDomainLinker===!0&&(c.allowLinker=!0),L("name",b)&&(c.name=b.name),b.fields=c,V("create",b.tracker,b.fields),v===!0&&V(N("set",b),"checkProtocolTask",null);for(var e in b.set)b.set.hasOwnProperty(e)&&V(N("set",b),e,b.set[e]);b.crossDomainLinker===!0&&(V(N("require",b),"linker"),a.isDefined(b.crossLinkDomains)&&V(N("linker:autoLink",b),b.crossLinkDomains)),b.displayFeatures&&V(N("require",b),"displayfeatures"),b.trackEcommerce&&(r?(V(N("require",b),"ec"),V(N("set",b),"&cu",l)):V(N("require",b),"ecommerce")),b.enhancedLinkAttribution&&V(N("require",b),"linkid"),C&&!t&&V(N("send",b),"pageview",B+P())}),f){var h=b.createElement("script"),n=b.getElementsByTagName("script")[0];h.src=e+"//www.google-analytics.com/cx/api.js?experiment="+f,n.parentNode.insertBefore(h,n)}return j=!0,!0},this._ecommerceEnabled=function(a,b){var c=q&&!r;return a===!0&&c===!1&&(q&&r?K._log("warn",b+" is not available when Enhanced Ecommerce is enabled with analytics.js"):K._log("warn","Ecommerce must be enabled to use "+b+" with analytics.js")),c},this._enhancedEcommerceEnabled=function(a,b){var c=q&&r;return a===!0&&c===!1&&K._log("warn","Enhanced Ecommerce must be enabled to use "+b+" with analytics.js"),c},this._trackPage=function(c,d,e){c=c?c:P(),d=d?d:E[0].title,S(function(){T("_set","title",d),T("_trackPageview",B+c)}),U(function(){var f={page:B+c,title:d};a.extend(f,Q()),a.isObject(e)&&a.extend(f,e),W(b,"send","pageview",f)})},this._trackEvent=function(b,c,d,e,f,g){S(function(){T("_trackEvent",b,c,d,e,!!f)}),U(function(){var h={},i=function(a){return M("trackEvent",a,!0)};a.isDefined(f)&&(h.nonInteraction=!!f),a.isObject(g)&&a.extend(h,g),a.isDefined(h.page)||(h.page=P()),W(i,"send","event",b,c,d,e,h)})},this._addTrans=function(a,b,c,d,e,f,g,h,i){S(function(){T("_addTrans",a,b,c,d,e,f,g,h)}),U(function(){if(K._ecommerceEnabled(!0,"addTrans")){var f=function(a){return M("trackEcommerce",a,!0)};W(f,"ecommerce:addTransaction",{id:a,affiliation:b,revenue:c,tax:d,shipping:e,currency:i||"USD"})}})},this._addItem=function(a,b,c,d,e,f){S(function(){T("_addItem",a,b,c,d,e,f)}),U(function(){if(K._ecommerceEnabled(!0,"addItem")){var g=function(a){return M("trackEcommerce",a,!0)};W(g,"ecommerce:addItem",{id:a,name:c,sku:b,category:d,price:e,quantity:f})}})},this._trackTrans=function(){S(function(){T("_trackTrans")}),U(function(){if(K._ecommerceEnabled(!0,"trackTrans")){var a=function(a){return M("trackEcommerce",a,!0)};W(a,"ecommerce:send")}})},this._clearTrans=function(){U(function(){if(K._ecommerceEnabled(!0,"clearTrans")){var a=function(a){return M("trackEcommerce",a,!0)};W(a,"ecommerce:clear")}})},this._addProduct=function(b,c,d,e,f,g,h,i,j,k){S(function(){T("_addProduct",b,c,d,e,f,g,h,i,j)}),U(function(){if(K._enhancedEcommerceEnabled(!0,"addProduct")){var l=function(a){return M("trackEcommerce",a,!0)},m={id:b,name:c,category:d,brand:e,variant:f,price:g,quantity:h,coupon:i,position:j};a.isObject(k)&&a.extend(m,k),W(l,"ec:addProduct",m)}})},this._addImpression=function(a,b,c,d,e,f,g,h){S(function(){T("_addImpression",a,b,c,d,e,f,g,h)}),U(function(){if(K._enhancedEcommerceEnabled(!0,"addImpression")){var i=function(a){return M("trackEcommerce",a,!0)};W(i,"ec:addImpression",{id:a,name:b,category:e,brand:d,variant:f,list:c,position:g,price:h})}})},this._addPromo=function(a,b,c,d){S(function(){T("_addPromo",a,b,c,d)}),U(function(){if(K._enhancedEcommerceEnabled(!0,"addPromo")){var e=function(a){return M("trackEcommerce",a,!0)};W(e,"ec:addPromo",{id:a,name:b,creative:c,position:d})}})},this._setAction=function(a,b){S(function(){T("_setAction",a,b)}),U(function(){if(K._enhancedEcommerceEnabled(!0,"setAction")){var c=function(a){return M("trackEcommerce",a,!0)};W(c,"ec:setAction",a,b)}})},this._trackTransaction=function(a,b,c,d,e,f,g,h,i){this._setAction("purchase",R(a,b,c,d,e,f,g,h,i))},this._trackRefund=function(a){this._setAction("refund",R(a))},this._trackCheckOut=function(a,b){this._setAction("checkout",R(null,null,null,null,null,null,null,a,b))},this._trackDetail=function(){this._setAction("detail"),this._pageView()},this._trackCart=function(a,b){-1!==["add","remove"].indexOf(a)&&(this._setAction(a,{list:b}),this._trackEvent("UX","click",a+("add"===a?" to cart":" from cart")))},this._promoClick=function(a){this._setAction("promo_click"),this._trackEvent("Internal Promotions","click",a)},this._productClick=function(a){this._setAction("click",R(null,null,null,null,null,null,a,null,null)),this._trackEvent("UX","click",a)},this._pageView=function(a){U(function(){V(N("send",a),"pageview")})},this._send=function(){var a=Array.prototype.slice.call(arguments);a.unshift("send"),U(function(){V.apply(K,a)})},this._set=function(a,b,c){U(function(){V(N("set",c),a,b)})},this._trackTimings=function(a,c,d,e){U(function(){W(b,"send","timing",a,c,d,e)})},this._trackException=function(a,c){U(function(){W(b,"send","exception",{exDescription:a,exFatal:!!c})})},n||(h?this._createAnalyticsScriptTag():this._createScriptTag()),C&&H.$on(x,function(){(!y||O.current&&O.current.templateUrl&&!O.current.doNotTrack)&&K._trackPage()}),{log:K.log,offlineQueue:K.offlineQueue,configuration:{accounts:c,universalAnalytics:h,crossDomainLinker:k,crossLinkDomains:d,currency:l,debugMode:m,delayScriptTag:n,disableAnalytics:p,displayFeatures:o,domainName:e,ecommerce:K._ecommerceEnabled(),enhancedEcommerce:K._enhancedEcommerceEnabled(),enhancedLinkAttribution:s,experimentId:f,hybridMobileSupport:v,ignoreFirstPageLoad:t,logAllCalls:u,pageEvent:x,readFromRoute:y,removeRegExp:g,testMode:z,traceDebuggingMode:A,trackPrefix:B,trackRoutes:C,trackUrlParams:D},getUrl:P,setCookieConfig:K._setCookieConfig,getCookieConfig:function(){return i},createAnalyticsScriptTag:function(a){return a&&(i=a),K._createAnalyticsScriptTag()},createScriptTag:function(){return K._createScriptTag()},offline:function(a){if(a===!0&&w===!1&&(w=!0),a===!1&&w===!0)for(w=!1;K.offlineQueue.length>0;){var b=K.offlineQueue.shift();b[0].apply(K,b[1])}return w},trackPage:function(a,b,c){K._trackPage.apply(K,arguments)},trackEvent:function(a,b,c,d,e,f){K._trackEvent.apply(K,arguments)},addTrans:function(a,b,c,d,e,f,g,h,i){K._addTrans.apply(K,arguments)},addItem:function(a,b,c,d,e,f){K._addItem.apply(K,arguments)},trackTrans:function(){K._trackTrans.apply(K,arguments)},clearTrans:function(){K._clearTrans.apply(K,arguments)},addProduct:function(a,b,c,d,e,f,g,h,i,j){K._addProduct.apply(K,arguments)},addPromo:function(a,b,c,d){K._addPromo.apply(K,arguments)},addImpression:function(a,b,c,d,e,f,g,h){K._addImpression.apply(K,arguments)},productClick:function(a){K._productClick.apply(K,arguments)},promoClick:function(a){K._promoClick.apply(K,arguments)},trackDetail:function(){K._trackDetail.apply(K,arguments)},trackCart:function(a,b){K._trackCart.apply(K,arguments)},trackCheckout:function(a,b){K._trackCheckOut.apply(K,arguments)},trackTimings:function(a,b,c,d){K._trackTimings.apply(K,arguments)},trackTransaction:function(a,b,c,d,e,f,g,h,i){K._trackTransaction.apply(K,arguments)},trackException:function(a,b){K._trackException.apply(K,arguments)},setAction:function(a,b){K._setAction.apply(K,arguments)},pageView:function(){K._pageView.apply(K,arguments)},send:function(a){K._send.apply(K,arguments)},set:function(a,b,c){K._set.apply(K,arguments)}}}]}).directive("gaTrackEvent",["Analytics","$parse",function(a,b){return{restrict:"A",link:function(c,d,e){var f=b(e.gaTrackEvent);d.bind("click",function(){e.gaTrackEventIf&&!c.$eval(e.gaTrackEventIf)||f.length>1&&a.trackEvent.apply(a,f(c))})}}}]),a.module("angular-google-analytics")});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXItZ29vZ2xlLWFuYWx5dGljcy5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFuYWx5dGljcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQW5ndWxhciBHb29nbGUgQW5hbHl0aWNzIC0gRWFzeSB0cmFja2luZyBmb3IgeW91ciBBbmd1bGFySlMgYXBwbGljYXRpb25cbiAqIEB2ZXJzaW9uIHYxLjEuNyAtIDIwMTYtMDMtMjVcbiAqIEBsaW5rIGh0dHA6Ly9naXRodWIuY29tL3Jldm9sdW5ldC9hbmd1bGFyLWdvb2dsZS1hbmFseXRpY3NcbiAqIEBhdXRob3IgSnVsaWVuIEJvdXF1aWxsb24gPGp1bGllbkByZXZvbHVuZXQuY29tPiAoaHR0cHM6Ly9naXRodWIuY29tL3Jldm9sdW5ldClcbiAqIEBjb250cmlidXRvcnMgSnVsaWVuIEJvdXF1aWxsb24gKGh0dHBzOi8vZ2l0aHViLmNvbS9yZXZvbHVuZXQpLEp1c3RpbiBTYXVuZGVycyAoaHR0cHM6Ly9naXRodWIuY29tL2p1c3RpbnNhKSxDaHJpcyBFc3BsaW4gKGh0dHBzOi8vZ2l0aHViLmNvbS9kZWx0YWVwc2lsb24pLEFkYW0gTWlzaW9ybnkgKGh0dHBzOi8vZ2l0aHViLmNvbS9hZGFtMTg3KVxuICogQGxpY2Vuc2UgTUlUIExpY2Vuc2UsIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUXG4gKi9cbiFmdW5jdGlvbihhLGIpe1widXNlIHN0cmljdFwiO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wiYW5ndWxhclwiXSxiKTpcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1iKHJlcXVpcmUoXCJhbmd1bGFyXCIpKTpiKGEuYW5ndWxhcil9KHRoaXMsZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjtyZXR1cm4gYS5tb2R1bGUoXCJhbmd1bGFyLWdvb2dsZS1hbmFseXRpY3NcIixbXSkucHJvdmlkZXIoXCJBbmFseXRpY3NcIixmdW5jdGlvbigpe3ZhciBjLGQsZSxmLGcsaD0hMCxpPVwiYXV0b1wiLGo9ITEsaz0hMSxsPVwiVVNEXCIsbT0hMSxuPSExLG89ITEscD0hMSxxPSExLHI9ITEscz0hMSx0PSExLHU9ITEsdj0hMSx3PSExLHg9XCIkcm91dGVDaGFuZ2VTdWNjZXNzXCIseT0hMSx6PSExLEE9ITEsQj1cIlwiLEM9ITAsRD0hMTt0aGlzLmxvZz1bXSx0aGlzLm9mZmxpbmVRdWV1ZT1bXSx0aGlzLnNldEFjY291bnQ9ZnVuY3Rpb24oZCl7cmV0dXJuIGM9YS5pc1VuZGVmaW5lZChkKXx8ZD09PSExP2I6YS5pc0FycmF5KGQpP2Q6YS5pc09iamVjdChkKT9bZF06W3t0cmFja2VyOmQsdHJhY2tFdmVudDohMH1dLHRoaXN9LHRoaXMudHJhY2tQYWdlcz1mdW5jdGlvbihhKXtyZXR1cm4gQz0hIWEsdGhpc30sdGhpcy50cmFja1ByZWZpeD1mdW5jdGlvbihhKXtyZXR1cm4gQj1hLHRoaXN9LHRoaXMuc2V0RG9tYWluTmFtZT1mdW5jdGlvbihhKXtyZXR1cm4gZT1hLHRoaXN9LHRoaXMudXNlRGlzcGxheUZlYXR1cmVzPWZ1bmN0aW9uKGEpe3JldHVybiBvPSEhYSx0aGlzfSx0aGlzLnVzZUFuYWx5dGljcz1mdW5jdGlvbihhKXtyZXR1cm4gaD0hIWEsdGhpc30sdGhpcy51c2VFbmhhbmNlZExpbmtBdHRyaWJ1dGlvbj1mdW5jdGlvbihhKXtyZXR1cm4gcz0hIWEsdGhpc30sdGhpcy51c2VDcm9zc0RvbWFpbkxpbmtlcj1mdW5jdGlvbihhKXtyZXR1cm4gaz0hIWEsdGhpc30sdGhpcy5zZXRDcm9zc0xpbmtEb21haW5zPWZ1bmN0aW9uKGEpe3JldHVybiBkPWEsdGhpc30sdGhpcy5zZXRQYWdlRXZlbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHg9YSx0aGlzfSx0aGlzLnNldENvb2tpZUNvbmZpZz1mdW5jdGlvbihhKXtyZXR1cm4gaT1hLHRoaXN9LHRoaXMudXNlRUNvbW1lcmNlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHE9ISFhLHI9ISFiLHRoaXN9LHRoaXMuc2V0Q3VycmVuY3k9ZnVuY3Rpb24oYSl7cmV0dXJuIGw9YSx0aGlzfSx0aGlzLnNldFJlbW92ZVJlZ0V4cD1mdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFJlZ0V4cCYmKGc9YSksdGhpc30sdGhpcy5zZXRFeHBlcmltZW50SWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGY9YSx0aGlzfSx0aGlzLmlnbm9yZUZpcnN0UGFnZUxvYWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHQ9ISFhLHRoaXN9LHRoaXMudHJhY2tVcmxQYXJhbXM9ZnVuY3Rpb24oYSl7cmV0dXJuIEQ9ISFhLHRoaXN9LHRoaXMuZGlzYWJsZUFuYWx5dGljcz1mdW5jdGlvbihhKXtyZXR1cm4gcD0hIWEsdGhpc30sdGhpcy5zZXRIeWJyaWRNb2JpbGVTdXBwb3J0PWZ1bmN0aW9uKGEpe3JldHVybiB2PSEhYSx0aGlzfSx0aGlzLnN0YXJ0T2ZmbGluZT1mdW5jdGlvbihhKXtyZXR1cm4gdz0hIWEsdz09PSEwJiZ0aGlzLmRlbGF5U2NyaXB0VGFnKCEwKSx0aGlzfSx0aGlzLmRlbGF5U2NyaXB0VGFnPWZ1bmN0aW9uKGEpe3JldHVybiBuPSEhYSx0aGlzfSx0aGlzLmxvZ0FsbENhbGxzPWZ1bmN0aW9uKGEpe3JldHVybiB1PSEhYSx0aGlzfSx0aGlzLmVudGVyVGVzdE1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gej0hMCx0aGlzfSx0aGlzLmVudGVyRGVidWdNb2RlPWZ1bmN0aW9uKGEpe3JldHVybiBtPSEwLEE9ISFhLHRoaXN9LHRoaXMucmVhZEZyb21Sb3V0ZT1mdW5jdGlvbihhKXtyZXR1cm4geT0hIWEsdGhpc30sdGhpcy4kZ2V0PVtcIiRkb2N1bWVudFwiLFwiJGxvY2F0aW9uXCIsXCIkbG9nXCIsXCIkcm9vdFNjb3BlXCIsXCIkd2luZG93XCIsXCIkaW5qZWN0b3JcIixmdW5jdGlvbihFLEYsRyxILEksSil7dmFyIEs9dGhpcyxMPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuaXNPYmplY3QoYykmJmEuaXNEZWZpbmVkKGNbYl0pfSxNPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTChhLGIpJiZiW2FdPT09Y30sTj1mdW5jdGlvbihiLGMpe3JldHVybiBhLmlzU3RyaW5nKGMpP2MrXCIuXCIrYjpMKFwibmFtZVwiLGMpP2MubmFtZStcIi5cIitiOmJ9LE89e307eSYmKEouaGFzKFwiJHJvdXRlXCIpP089Si5nZXQoXCIkcm91dGVcIik6Ry53YXJuKFwiJHJvdXRlIHNlcnZpY2UgaXMgbm90IGF2YWlsYWJsZS4gTWFrZSBzdXJlIHlvdSBoYXZlIGluY2x1ZGVkIG5nLXJvdXRlIGluIHlvdXIgYXBwbGljYXRpb24gZGVwZW5kZW5jaWVzLlwiKSk7dmFyIFA9ZnVuY3Rpb24oKXtpZih5JiZPLmN1cnJlbnQmJlwicGFnZVRyYWNrXCJpbiBPLmN1cnJlbnQpcmV0dXJuIE8uY3VycmVudC5wYWdlVHJhY2s7dmFyIGE9RD9GLnVybCgpOkYucGF0aCgpO3JldHVybiBnP2EucmVwbGFjZShnLFwiXCIpOmF9LFE9ZnVuY3Rpb24oKXt2YXIgYj17dXRtX3NvdXJjZTpcImNhbXBhaWduU291cmNlXCIsdXRtX21lZGl1bTpcImNhbXBhaWduTWVkaXVtXCIsdXRtX3Rlcm06XCJjYW1wYWlnblRlcm1cIix1dG1fY29udGVudDpcImNhbXBhaWduQ29udGVudFwiLHV0bV9jYW1wYWlnbjpcImNhbXBhaWduTmFtZVwifSxjPXt9O3JldHVybiBhLmZvckVhY2goRi5zZWFyY2goKSxmdW5jdGlvbihkLGUpe3ZhciBmPWJbZV07YS5pc0RlZmluZWQoZikmJihjW2ZdPWQpfSksY30sUj1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSl7dmFyIGo9e307cmV0dXJuIGEmJihqLmlkPWEpLGImJihqLmFmZmlsaWF0aW9uPWIpLGMmJihqLnJldmVudWU9YyksZCYmKGoudGF4PWQpLGUmJihqLnNoaXBwaW5nPWUpLGYmJihqLmNvdXBvbj1mKSxnJiYoai5saXN0PWcpLGgmJihqLnN0ZXA9aCksaSYmKGoub3B0aW9uPWkpLGp9LFM9ZnVuY3Rpb24oYSl7IWgmJkkuX2dhcSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYSYmYSgpfSxUPWZ1bmN0aW9uKCl7dmFyIGE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtyZXR1cm4gdz09PSEwP3ZvaWQgSy5vZmZsaW5lUXVldWUucHVzaChbVCxhXSk6KEkuX2dhcXx8KEkuX2dhcT1bXSksdT09PSEwJiZLLl9sb2cuYXBwbHkoSyxhKSx2b2lkIEkuX2dhcS5wdXNoKGEpKX0sVT1mdW5jdGlvbihhKXtoJiZJLmdhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZhKCl9LFY9ZnVuY3Rpb24oKXt2YXIgYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3JldHVybiB3PT09ITA/dm9pZCBLLm9mZmxpbmVRdWV1ZS5wdXNoKFtWLGFdKTpcImZ1bmN0aW9uXCIhPXR5cGVvZiBJLmdhP3ZvaWQgSy5fbG9nKFwid2FyblwiLFwiZ2EgZnVuY3Rpb24gbm90IHNldCBvbiB3aW5kb3dcIik6KHU9PT0hMCYmSy5fbG9nLmFwcGx5KEssYSksdm9pZCBJLmdhLmFwcGx5KG51bGwsYSkpfSxXPWZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxkPWJbMF0sZT1bXTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2MuZm9yRWFjaChmdW5jdGlvbihiKXthKGIpJiZlLnB1c2goYil9KTplPWMsMD09PWUubGVuZ3RoP3ZvaWQgVi5hcHBseShLLGIpOnZvaWQgZS5mb3JFYWNoKGZ1bmN0aW9uKGEpe0woXCJzZWxlY3RcIixhKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5zZWxlY3QmJiFhLnNlbGVjdChiKXx8KGJbMF09TihkLGEpLFYuYXBwbHkoSyxiKSl9KX07cmV0dXJuIHRoaXMuX2xvZz1mdW5jdGlvbigpe3ZhciBhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7aWYoYS5sZW5ndGg+MCl7aWYoYS5sZW5ndGg+MSlzd2l0Y2goYVswXSl7Y2FzZVwiZGVidWdcIjpjYXNlXCJlcnJvclwiOmNhc2VcImluZm9cIjpjYXNlXCJsb2dcIjpjYXNlXCJ3YXJuXCI6R1thWzBdXShhLnNsaWNlKDEpKX1LLmxvZy5wdXNoKGEpfX0sdGhpcy5fY3JlYXRlU2NyaXB0VGFnPWZ1bmN0aW9uKCl7aWYoIWN8fGMubGVuZ3RoPDEpcmV0dXJuIHZvaWQgSy5fbG9nKFwid2FyblwiLFwiTm8gYWNjb3VudCBpZCBzZXQgdG8gY3JlYXRlIHNjcmlwdCB0YWdcIik7aWYoYy5sZW5ndGg+MSYmKEsuX2xvZyhcIndhcm5cIixcIk11bHRpcGxlIHRyYWNrZXJzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggZ2EuanMuIFVzaW5nIGZpcnN0IHRyYWNrZXIgb25seVwiKSxjPWMuc2xpY2UoMCwxKSksaj09PSEwKXJldHVybiB2b2lkIEsuX2xvZyhcIndhcm5cIixcImdhLmpzIG9yIGFuYWx5dGljcy5qcyBzY3JpcHQgdGFnIGFscmVhZHkgY3JlYXRlZFwiKTtwPT09ITAmJihLLl9sb2coXCJpbmZvXCIsXCJBbmFseXRpY3MgZGlzYWJsZWQ6IFwiK2NbMF0udHJhY2tlciksSVtcImdhLWRpc2FibGUtXCIrY1swXS50cmFja2VyXT0hMCksVChcIl9zZXRBY2NvdW50XCIsY1swXS50cmFja2VyKSxlJiZUKFwiX3NldERvbWFpbk5hbWVcIixlKSxzJiZUKFwiX3JlcXVpcmVcIixcImlucGFnZV9saW5raWRcIixcIi8vd3d3Lmdvb2dsZS1hbmFseXRpY3MuY29tL3BsdWdpbnMvZ2EvaW5wYWdlX2xpbmtpZC5qc1wiKSxDJiYhdCYmKGc/VChcIl90cmFja1BhZ2V2aWV3XCIsUCgpKTpUKFwiX3RyYWNrUGFnZXZpZXdcIikpO3ZhciBhLGI9RVswXTtyZXR1cm4gYT1vPT09ITA/KFwiaHR0cHM6XCI9PT1iLmxvY2F0aW9uLnByb3RvY29sP1wiaHR0cHM6Ly9cIjpcImh0dHA6Ly9cIikrXCJzdGF0cy5nLmRvdWJsZWNsaWNrLm5ldC9kYy5qc1wiOihcImh0dHBzOlwiPT09Yi5sb2NhdGlvbi5wcm90b2NvbD9cImh0dHBzOi8vc3NsXCI6XCJodHRwOi8vd3d3XCIpK1wiLmdvb2dsZS1hbmFseXRpY3MuY29tL2dhLmpzXCIseiE9PSEwPyFmdW5jdGlvbigpe3ZhciBjPWIuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtjLnR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIixjLmFzeW5jPSEwLGMuc3JjPWE7dmFyIGQ9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKVswXTtkLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGMsZCl9KCk6Sy5fbG9nKFwiaW5qZWN0XCIsYSksaj0hMCwhMH0sdGhpcy5fY3JlYXRlQW5hbHl0aWNzU2NyaXB0VGFnPWZ1bmN0aW9uKCl7aWYoIWMpcmV0dXJuIHZvaWQgSy5fbG9nKFwid2FyblwiLFwiTm8gYWNjb3VudCBpZCBzZXQgdG8gY3JlYXRlIGFuYWx5dGljcyBzY3JpcHQgdGFnXCIpO2lmKGo9PT0hMClyZXR1cm4gdm9pZCBLLl9sb2coXCJ3YXJuXCIsXCJnYS5qcyBvciBhbmFseXRpY3MuanMgc2NyaXB0IHRhZyBhbHJlYWR5IGNyZWF0ZWRcIik7cD09PSEwJiZjLmZvckVhY2goZnVuY3Rpb24oYSl7Sy5fbG9nKFwiaW5mb1wiLFwiQW5hbHl0aWNzIGRpc2FibGVkOiBcIithLnRyYWNrZXIpLElbXCJnYS1kaXNhYmxlLVwiK2EudHJhY2tlcl09ITB9KTt2YXIgYj1FWzBdLGU9dj09PSEwP1wiaHR0cHM6XCI6XCJcIixnPWUrXCIvL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS9cIisobT9cImFuYWx5dGljc19kZWJ1Zy5qc1wiOlwiYW5hbHl0aWNzLmpzXCIpO2lmKHohPT0hMD8hZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7YS5Hb29nbGVBbmFseXRpY3NPYmplY3Q9ZSxhW2VdPWFbZV18fGZ1bmN0aW9uKCl7KGFbZV0ucT1hW2VdLnF8fFtdKS5wdXNoKGFyZ3VtZW50cyl9LGFbZV0ubD0xKm5ldyBEYXRlLGY9Yi5jcmVhdGVFbGVtZW50KGMpLGc9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShjKVswXSxmLmFzeW5jPTEsZi5zcmM9ZCxnLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGYsZyl9KHdpbmRvdyxiLFwic2NyaXB0XCIsZyxcImdhXCIpOihcImZ1bmN0aW9uXCIhPXR5cGVvZiBJLmdhJiYoSS5nYT1mdW5jdGlvbigpe30pLEsuX2xvZyhcImluamVjdFwiLGcpKSxBJiYoSS5nYV9kZWJ1Zz17dHJhY2U6ITB9KSxjLmZvckVhY2goZnVuY3Rpb24oYil7Yi5jcm9zc0RvbWFpbkxpbmtlcj1MKFwiY3Jvc3NEb21haW5MaW5rZXJcIixiKT9iLmNyb3NzRG9tYWluTGlua2VyOmssYi5jcm9zc0xpbmtEb21haW5zPUwoXCJjcm9zc0xpbmtEb21haW5zXCIsYik/Yi5jcm9zc0xpbmtEb21haW5zOmQsYi5kaXNwbGF5RmVhdHVyZXM9TChcImRpc3BsYXlGZWF0dXJlc1wiLGIpP2IuZGlzcGxheUZlYXR1cmVzOm8sYi5lbmhhbmNlZExpbmtBdHRyaWJ1dGlvbj1MKFwiZW5oYW5jZWRMaW5rQXR0cmlidXRpb25cIixiKT9iLmVuaGFuY2VkTGlua0F0dHJpYnV0aW9uOnMsYi5zZXQ9TChcInNldFwiLGIpP2Iuc2V0Ont9LGIudHJhY2tFY29tbWVyY2U9TChcInRyYWNrRWNvbW1lcmNlXCIsYik/Yi50cmFja0Vjb21tZXJjZTpxLGIudHJhY2tFdmVudD1MKFwidHJhY2tFdmVudFwiLGIpP2IudHJhY2tFdmVudDohMTt2YXIgYz17fTtMKFwiZmllbGRzXCIsYik/Yz1iLmZpZWxkczpMKFwiY29va2llQ29uZmlnXCIsYik/YS5pc1N0cmluZyhiLmNvb2tpZUNvbmZpZyk/Yy5jb29raWVEb21haW49Yi5jb29raWVDb25maWc6Yz1iLmNvb2tpZUNvbmZpZzphLmlzU3RyaW5nKGkpP2MuY29va2llRG9tYWluPWk6aSYmKGM9aSksYi5jcm9zc0RvbWFpbkxpbmtlcj09PSEwJiYoYy5hbGxvd0xpbmtlcj0hMCksTChcIm5hbWVcIixiKSYmKGMubmFtZT1iLm5hbWUpLGIuZmllbGRzPWMsVihcImNyZWF0ZVwiLGIudHJhY2tlcixiLmZpZWxkcyksdj09PSEwJiZWKE4oXCJzZXRcIixiKSxcImNoZWNrUHJvdG9jb2xUYXNrXCIsbnVsbCk7Zm9yKHZhciBlIGluIGIuc2V0KWIuc2V0Lmhhc093blByb3BlcnR5KGUpJiZWKE4oXCJzZXRcIixiKSxlLGIuc2V0W2VdKTtiLmNyb3NzRG9tYWluTGlua2VyPT09ITAmJihWKE4oXCJyZXF1aXJlXCIsYiksXCJsaW5rZXJcIiksYS5pc0RlZmluZWQoYi5jcm9zc0xpbmtEb21haW5zKSYmVihOKFwibGlua2VyOmF1dG9MaW5rXCIsYiksYi5jcm9zc0xpbmtEb21haW5zKSksYi5kaXNwbGF5RmVhdHVyZXMmJlYoTihcInJlcXVpcmVcIixiKSxcImRpc3BsYXlmZWF0dXJlc1wiKSxiLnRyYWNrRWNvbW1lcmNlJiYocj8oVihOKFwicmVxdWlyZVwiLGIpLFwiZWNcIiksVihOKFwic2V0XCIsYiksXCImY3VcIixsKSk6VihOKFwicmVxdWlyZVwiLGIpLFwiZWNvbW1lcmNlXCIpKSxiLmVuaGFuY2VkTGlua0F0dHJpYnV0aW9uJiZWKE4oXCJyZXF1aXJlXCIsYiksXCJsaW5raWRcIiksQyYmIXQmJlYoTihcInNlbmRcIixiKSxcInBhZ2V2aWV3XCIsQitQKCkpfSksZil7dmFyIGg9Yi5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLG49Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKVswXTtoLnNyYz1lK1wiLy93d3cuZ29vZ2xlLWFuYWx5dGljcy5jb20vY3gvYXBpLmpzP2V4cGVyaW1lbnQ9XCIrZixuLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGgsbil9cmV0dXJuIGo9ITAsITB9LHRoaXMuX2Vjb21tZXJjZUVuYWJsZWQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1xJiYhcjtyZXR1cm4gYT09PSEwJiZjPT09ITEmJihxJiZyP0suX2xvZyhcIndhcm5cIixiK1wiIGlzIG5vdCBhdmFpbGFibGUgd2hlbiBFbmhhbmNlZCBFY29tbWVyY2UgaXMgZW5hYmxlZCB3aXRoIGFuYWx5dGljcy5qc1wiKTpLLl9sb2coXCJ3YXJuXCIsXCJFY29tbWVyY2UgbXVzdCBiZSBlbmFibGVkIHRvIHVzZSBcIitiK1wiIHdpdGggYW5hbHl0aWNzLmpzXCIpKSxjfSx0aGlzLl9lbmhhbmNlZEVjb21tZXJjZUVuYWJsZWQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1xJiZyO3JldHVybiBhPT09ITAmJmM9PT0hMSYmSy5fbG9nKFwid2FyblwiLFwiRW5oYW5jZWQgRWNvbW1lcmNlIG11c3QgYmUgZW5hYmxlZCB0byB1c2UgXCIrYitcIiB3aXRoIGFuYWx5dGljcy5qc1wiKSxjfSx0aGlzLl90cmFja1BhZ2U9ZnVuY3Rpb24oYyxkLGUpe2M9Yz9jOlAoKSxkPWQ/ZDpFWzBdLnRpdGxlLFMoZnVuY3Rpb24oKXtUKFwiX3NldFwiLFwidGl0bGVcIixkKSxUKFwiX3RyYWNrUGFnZXZpZXdcIixCK2MpfSksVShmdW5jdGlvbigpe3ZhciBmPXtwYWdlOkIrYyx0aXRsZTpkfTthLmV4dGVuZChmLFEoKSksYS5pc09iamVjdChlKSYmYS5leHRlbmQoZixlKSxXKGIsXCJzZW5kXCIsXCJwYWdldmlld1wiLGYpfSl9LHRoaXMuX3RyYWNrRXZlbnQ9ZnVuY3Rpb24oYixjLGQsZSxmLGcpe1MoZnVuY3Rpb24oKXtUKFwiX3RyYWNrRXZlbnRcIixiLGMsZCxlLCEhZil9KSxVKGZ1bmN0aW9uKCl7dmFyIGg9e30saT1mdW5jdGlvbihhKXtyZXR1cm4gTShcInRyYWNrRXZlbnRcIixhLCEwKX07YS5pc0RlZmluZWQoZikmJihoLm5vbkludGVyYWN0aW9uPSEhZiksYS5pc09iamVjdChnKSYmYS5leHRlbmQoaCxnKSxhLmlzRGVmaW5lZChoLnBhZ2UpfHwoaC5wYWdlPVAoKSksVyhpLFwic2VuZFwiLFwiZXZlbnRcIixiLGMsZCxlLGgpfSl9LHRoaXMuX2FkZFRyYW5zPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpKXtTKGZ1bmN0aW9uKCl7VChcIl9hZGRUcmFuc1wiLGEsYixjLGQsZSxmLGcsaCl9KSxVKGZ1bmN0aW9uKCl7aWYoSy5fZWNvbW1lcmNlRW5hYmxlZCghMCxcImFkZFRyYW5zXCIpKXt2YXIgZj1mdW5jdGlvbihhKXtyZXR1cm4gTShcInRyYWNrRWNvbW1lcmNlXCIsYSwhMCl9O1coZixcImVjb21tZXJjZTphZGRUcmFuc2FjdGlvblwiLHtpZDphLGFmZmlsaWF0aW9uOmIscmV2ZW51ZTpjLHRheDpkLHNoaXBwaW5nOmUsY3VycmVuY3k6aXx8XCJVU0RcIn0pfX0pfSx0aGlzLl9hZGRJdGVtPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtTKGZ1bmN0aW9uKCl7VChcIl9hZGRJdGVtXCIsYSxiLGMsZCxlLGYpfSksVShmdW5jdGlvbigpe2lmKEsuX2Vjb21tZXJjZUVuYWJsZWQoITAsXCJhZGRJdGVtXCIpKXt2YXIgZz1mdW5jdGlvbihhKXtyZXR1cm4gTShcInRyYWNrRWNvbW1lcmNlXCIsYSwhMCl9O1coZyxcImVjb21tZXJjZTphZGRJdGVtXCIse2lkOmEsbmFtZTpjLHNrdTpiLGNhdGVnb3J5OmQscHJpY2U6ZSxxdWFudGl0eTpmfSl9fSl9LHRoaXMuX3RyYWNrVHJhbnM9ZnVuY3Rpb24oKXtTKGZ1bmN0aW9uKCl7VChcIl90cmFja1RyYW5zXCIpfSksVShmdW5jdGlvbigpe2lmKEsuX2Vjb21tZXJjZUVuYWJsZWQoITAsXCJ0cmFja1RyYW5zXCIpKXt2YXIgYT1mdW5jdGlvbihhKXtyZXR1cm4gTShcInRyYWNrRWNvbW1lcmNlXCIsYSwhMCl9O1coYSxcImVjb21tZXJjZTpzZW5kXCIpfX0pfSx0aGlzLl9jbGVhclRyYW5zPWZ1bmN0aW9uKCl7VShmdW5jdGlvbigpe2lmKEsuX2Vjb21tZXJjZUVuYWJsZWQoITAsXCJjbGVhclRyYW5zXCIpKXt2YXIgYT1mdW5jdGlvbihhKXtyZXR1cm4gTShcInRyYWNrRWNvbW1lcmNlXCIsYSwhMCl9O1coYSxcImVjb21tZXJjZTpjbGVhclwiKX19KX0sdGhpcy5fYWRkUHJvZHVjdD1mdW5jdGlvbihiLGMsZCxlLGYsZyxoLGksaixrKXtTKGZ1bmN0aW9uKCl7VChcIl9hZGRQcm9kdWN0XCIsYixjLGQsZSxmLGcsaCxpLGopfSksVShmdW5jdGlvbigpe2lmKEsuX2VuaGFuY2VkRWNvbW1lcmNlRW5hYmxlZCghMCxcImFkZFByb2R1Y3RcIikpe3ZhciBsPWZ1bmN0aW9uKGEpe3JldHVybiBNKFwidHJhY2tFY29tbWVyY2VcIixhLCEwKX0sbT17aWQ6YixuYW1lOmMsY2F0ZWdvcnk6ZCxicmFuZDplLHZhcmlhbnQ6ZixwcmljZTpnLHF1YW50aXR5OmgsY291cG9uOmkscG9zaXRpb246an07YS5pc09iamVjdChrKSYmYS5leHRlbmQobSxrKSxXKGwsXCJlYzphZGRQcm9kdWN0XCIsbSl9fSl9LHRoaXMuX2FkZEltcHJlc3Npb249ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXtTKGZ1bmN0aW9uKCl7VChcIl9hZGRJbXByZXNzaW9uXCIsYSxiLGMsZCxlLGYsZyxoKX0pLFUoZnVuY3Rpb24oKXtpZihLLl9lbmhhbmNlZEVjb21tZXJjZUVuYWJsZWQoITAsXCJhZGRJbXByZXNzaW9uXCIpKXt2YXIgaT1mdW5jdGlvbihhKXtyZXR1cm4gTShcInRyYWNrRWNvbW1lcmNlXCIsYSwhMCl9O1coaSxcImVjOmFkZEltcHJlc3Npb25cIix7aWQ6YSxuYW1lOmIsY2F0ZWdvcnk6ZSxicmFuZDpkLHZhcmlhbnQ6ZixsaXN0OmMscG9zaXRpb246ZyxwcmljZTpofSl9fSl9LHRoaXMuX2FkZFByb21vPWZ1bmN0aW9uKGEsYixjLGQpe1MoZnVuY3Rpb24oKXtUKFwiX2FkZFByb21vXCIsYSxiLGMsZCl9KSxVKGZ1bmN0aW9uKCl7aWYoSy5fZW5oYW5jZWRFY29tbWVyY2VFbmFibGVkKCEwLFwiYWRkUHJvbW9cIikpe3ZhciBlPWZ1bmN0aW9uKGEpe3JldHVybiBNKFwidHJhY2tFY29tbWVyY2VcIixhLCEwKX07VyhlLFwiZWM6YWRkUHJvbW9cIix7aWQ6YSxuYW1lOmIsY3JlYXRpdmU6Yyxwb3NpdGlvbjpkfSl9fSl9LHRoaXMuX3NldEFjdGlvbj1mdW5jdGlvbihhLGIpe1MoZnVuY3Rpb24oKXtUKFwiX3NldEFjdGlvblwiLGEsYil9KSxVKGZ1bmN0aW9uKCl7aWYoSy5fZW5oYW5jZWRFY29tbWVyY2VFbmFibGVkKCEwLFwic2V0QWN0aW9uXCIpKXt2YXIgYz1mdW5jdGlvbihhKXtyZXR1cm4gTShcInRyYWNrRWNvbW1lcmNlXCIsYSwhMCl9O1coYyxcImVjOnNldEFjdGlvblwiLGEsYil9fSl9LHRoaXMuX3RyYWNrVHJhbnNhY3Rpb249ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGkpe3RoaXMuX3NldEFjdGlvbihcInB1cmNoYXNlXCIsUihhLGIsYyxkLGUsZixnLGgsaSkpfSx0aGlzLl90cmFja1JlZnVuZD1mdW5jdGlvbihhKXt0aGlzLl9zZXRBY3Rpb24oXCJyZWZ1bmRcIixSKGEpKX0sdGhpcy5fdHJhY2tDaGVja091dD1mdW5jdGlvbihhLGIpe3RoaXMuX3NldEFjdGlvbihcImNoZWNrb3V0XCIsUihudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLGEsYikpfSx0aGlzLl90cmFja0RldGFpbD1mdW5jdGlvbigpe3RoaXMuX3NldEFjdGlvbihcImRldGFpbFwiKSx0aGlzLl9wYWdlVmlldygpfSx0aGlzLl90cmFja0NhcnQ9ZnVuY3Rpb24oYSxiKXstMSE9PVtcImFkZFwiLFwicmVtb3ZlXCJdLmluZGV4T2YoYSkmJih0aGlzLl9zZXRBY3Rpb24oYSx7bGlzdDpifSksdGhpcy5fdHJhY2tFdmVudChcIlVYXCIsXCJjbGlja1wiLGErKFwiYWRkXCI9PT1hP1wiIHRvIGNhcnRcIjpcIiBmcm9tIGNhcnRcIikpKX0sdGhpcy5fcHJvbW9DbGljaz1mdW5jdGlvbihhKXt0aGlzLl9zZXRBY3Rpb24oXCJwcm9tb19jbGlja1wiKSx0aGlzLl90cmFja0V2ZW50KFwiSW50ZXJuYWwgUHJvbW90aW9uc1wiLFwiY2xpY2tcIixhKX0sdGhpcy5fcHJvZHVjdENsaWNrPWZ1bmN0aW9uKGEpe3RoaXMuX3NldEFjdGlvbihcImNsaWNrXCIsUihudWxsLG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxhLG51bGwsbnVsbCkpLHRoaXMuX3RyYWNrRXZlbnQoXCJVWFwiLFwiY2xpY2tcIixhKX0sdGhpcy5fcGFnZVZpZXc9ZnVuY3Rpb24oYSl7VShmdW5jdGlvbigpe1YoTihcInNlbmRcIixhKSxcInBhZ2V2aWV3XCIpfSl9LHRoaXMuX3NlbmQ9ZnVuY3Rpb24oKXt2YXIgYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO2EudW5zaGlmdChcInNlbmRcIiksVShmdW5jdGlvbigpe1YuYXBwbHkoSyxhKX0pfSx0aGlzLl9zZXQ9ZnVuY3Rpb24oYSxiLGMpe1UoZnVuY3Rpb24oKXtWKE4oXCJzZXRcIixjKSxhLGIpfSl9LHRoaXMuX3RyYWNrVGltaW5ncz1mdW5jdGlvbihhLGMsZCxlKXtVKGZ1bmN0aW9uKCl7VyhiLFwic2VuZFwiLFwidGltaW5nXCIsYSxjLGQsZSl9KX0sdGhpcy5fdHJhY2tFeGNlcHRpb249ZnVuY3Rpb24oYSxjKXtVKGZ1bmN0aW9uKCl7VyhiLFwic2VuZFwiLFwiZXhjZXB0aW9uXCIse2V4RGVzY3JpcHRpb246YSxleEZhdGFsOiEhY30pfSl9LG58fChoP3RoaXMuX2NyZWF0ZUFuYWx5dGljc1NjcmlwdFRhZygpOnRoaXMuX2NyZWF0ZVNjcmlwdFRhZygpKSxDJiZILiRvbih4LGZ1bmN0aW9uKCl7KCF5fHxPLmN1cnJlbnQmJk8uY3VycmVudC50ZW1wbGF0ZVVybCYmIU8uY3VycmVudC5kb05vdFRyYWNrKSYmSy5fdHJhY2tQYWdlKCl9KSx7bG9nOksubG9nLG9mZmxpbmVRdWV1ZTpLLm9mZmxpbmVRdWV1ZSxjb25maWd1cmF0aW9uOnthY2NvdW50czpjLHVuaXZlcnNhbEFuYWx5dGljczpoLGNyb3NzRG9tYWluTGlua2VyOmssY3Jvc3NMaW5rRG9tYWluczpkLGN1cnJlbmN5OmwsZGVidWdNb2RlOm0sZGVsYXlTY3JpcHRUYWc6bixkaXNhYmxlQW5hbHl0aWNzOnAsZGlzcGxheUZlYXR1cmVzOm8sZG9tYWluTmFtZTplLGVjb21tZXJjZTpLLl9lY29tbWVyY2VFbmFibGVkKCksZW5oYW5jZWRFY29tbWVyY2U6Sy5fZW5oYW5jZWRFY29tbWVyY2VFbmFibGVkKCksZW5oYW5jZWRMaW5rQXR0cmlidXRpb246cyxleHBlcmltZW50SWQ6ZixoeWJyaWRNb2JpbGVTdXBwb3J0OnYsaWdub3JlRmlyc3RQYWdlTG9hZDp0LGxvZ0FsbENhbGxzOnUscGFnZUV2ZW50OngscmVhZEZyb21Sb3V0ZTp5LHJlbW92ZVJlZ0V4cDpnLHRlc3RNb2RlOnosdHJhY2VEZWJ1Z2dpbmdNb2RlOkEsdHJhY2tQcmVmaXg6Qix0cmFja1JvdXRlczpDLHRyYWNrVXJsUGFyYW1zOkR9LGdldFVybDpQLHNldENvb2tpZUNvbmZpZzpLLl9zZXRDb29raWVDb25maWcsZ2V0Q29va2llQ29uZmlnOmZ1bmN0aW9uKCl7cmV0dXJuIGl9LGNyZWF0ZUFuYWx5dGljc1NjcmlwdFRhZzpmdW5jdGlvbihhKXtyZXR1cm4gYSYmKGk9YSksSy5fY3JlYXRlQW5hbHl0aWNzU2NyaXB0VGFnKCl9LGNyZWF0ZVNjcmlwdFRhZzpmdW5jdGlvbigpe3JldHVybiBLLl9jcmVhdGVTY3JpcHRUYWcoKX0sb2ZmbGluZTpmdW5jdGlvbihhKXtpZihhPT09ITAmJnc9PT0hMSYmKHc9ITApLGE9PT0hMSYmdz09PSEwKWZvcih3PSExO0sub2ZmbGluZVF1ZXVlLmxlbmd0aD4wOyl7dmFyIGI9Sy5vZmZsaW5lUXVldWUuc2hpZnQoKTtiWzBdLmFwcGx5KEssYlsxXSl9cmV0dXJuIHd9LHRyYWNrUGFnZTpmdW5jdGlvbihhLGIsYyl7Sy5fdHJhY2tQYWdlLmFwcGx5KEssYXJndW1lbnRzKX0sdHJhY2tFdmVudDpmdW5jdGlvbihhLGIsYyxkLGUsZil7Sy5fdHJhY2tFdmVudC5hcHBseShLLGFyZ3VtZW50cyl9LGFkZFRyYW5zOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpKXtLLl9hZGRUcmFucy5hcHBseShLLGFyZ3VtZW50cyl9LGFkZEl0ZW06ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe0suX2FkZEl0ZW0uYXBwbHkoSyxhcmd1bWVudHMpfSx0cmFja1RyYW5zOmZ1bmN0aW9uKCl7Sy5fdHJhY2tUcmFucy5hcHBseShLLGFyZ3VtZW50cyl9LGNsZWFyVHJhbnM6ZnVuY3Rpb24oKXtLLl9jbGVhclRyYW5zLmFwcGx5KEssYXJndW1lbnRzKX0sYWRkUHJvZHVjdDpmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSxqKXtLLl9hZGRQcm9kdWN0LmFwcGx5KEssYXJndW1lbnRzKX0sYWRkUHJvbW86ZnVuY3Rpb24oYSxiLGMsZCl7Sy5fYWRkUHJvbW8uYXBwbHkoSyxhcmd1bWVudHMpfSxhZGRJbXByZXNzaW9uOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7Sy5fYWRkSW1wcmVzc2lvbi5hcHBseShLLGFyZ3VtZW50cyl9LHByb2R1Y3RDbGljazpmdW5jdGlvbihhKXtLLl9wcm9kdWN0Q2xpY2suYXBwbHkoSyxhcmd1bWVudHMpfSxwcm9tb0NsaWNrOmZ1bmN0aW9uKGEpe0suX3Byb21vQ2xpY2suYXBwbHkoSyxhcmd1bWVudHMpfSx0cmFja0RldGFpbDpmdW5jdGlvbigpe0suX3RyYWNrRGV0YWlsLmFwcGx5KEssYXJndW1lbnRzKX0sdHJhY2tDYXJ0OmZ1bmN0aW9uKGEsYil7Sy5fdHJhY2tDYXJ0LmFwcGx5KEssYXJndW1lbnRzKX0sdHJhY2tDaGVja291dDpmdW5jdGlvbihhLGIpe0suX3RyYWNrQ2hlY2tPdXQuYXBwbHkoSyxhcmd1bWVudHMpfSx0cmFja1RpbWluZ3M6ZnVuY3Rpb24oYSxiLGMsZCl7Sy5fdHJhY2tUaW1pbmdzLmFwcGx5KEssYXJndW1lbnRzKX0sdHJhY2tUcmFuc2FjdGlvbjpmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSl7Sy5fdHJhY2tUcmFuc2FjdGlvbi5hcHBseShLLGFyZ3VtZW50cyl9LHRyYWNrRXhjZXB0aW9uOmZ1bmN0aW9uKGEsYil7Sy5fdHJhY2tFeGNlcHRpb24uYXBwbHkoSyxhcmd1bWVudHMpfSxzZXRBY3Rpb246ZnVuY3Rpb24oYSxiKXtLLl9zZXRBY3Rpb24uYXBwbHkoSyxhcmd1bWVudHMpfSxwYWdlVmlldzpmdW5jdGlvbigpe0suX3BhZ2VWaWV3LmFwcGx5KEssYXJndW1lbnRzKX0sc2VuZDpmdW5jdGlvbihhKXtLLl9zZW5kLmFwcGx5KEssYXJndW1lbnRzKX0sc2V0OmZ1bmN0aW9uKGEsYixjKXtLLl9zZXQuYXBwbHkoSyxhcmd1bWVudHMpfX19XX0pLmRpcmVjdGl2ZShcImdhVHJhY2tFdmVudFwiLFtcIkFuYWx5dGljc1wiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIsbGluazpmdW5jdGlvbihjLGQsZSl7dmFyIGY9YihlLmdhVHJhY2tFdmVudCk7ZC5iaW5kKFwiY2xpY2tcIixmdW5jdGlvbigpe2UuZ2FUcmFja0V2ZW50SWYmJiFjLiRldmFsKGUuZ2FUcmFja0V2ZW50SWYpfHxmLmxlbmd0aD4xJiZhLnRyYWNrRXZlbnQuYXBwbHkoYSxmKGMpKX0pfX19XSksYS5tb2R1bGUoXCJhbmd1bGFyLWdvb2dsZS1hbmFseXRpY3NcIil9KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
